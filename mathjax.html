<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>MathJax example</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js">
  </script>
  <script>
    var sign = ["+", "-", "=", "*", "/", "(", ")", "[", "]", "{", "}", "^"]

    var term = function () {
      this.cofficient = 2;
      this.variable = ["x"];
      this.degree = 2;
      this.sign = "+";
      this.child;
      this.parent;
    }
    function term_load() {
      console.log("hello");
      document.getElementById("fx").innerHTML = MathJax.tex2chtml("\\(x\\)", { em: 12, ex: 6, display: false }).outerHTML;
    }
    var equation = "";
    var MathCallStack = [];
    var MathCallStack_L1 = [];
    function availableInMathCallStack(ob) {
      var state = false;
      var indx = 0;
      for (var i = 0; i < MathCallStack.length; i++) {
        if (MathCallStack[i].type == ob.type) {
          if (MathCallStack[i].char == ob.char) {
            state = true;
          }
        }
      }
      return [state, indx];
    }

    function buildEquation() {
      dmy_equation = "";
      for (var i = 0; i < MathCallStack.length; i++) {
        console.log(i);
        dmy_equation += MathCallStack[i].char + "^{" + MathCallStack[i].exp + "}";
      }
      return dmy_equation;
    }
    function add_term() {
      trm = { type: 1, char: "x", exp: 1 };
      availibility = availableInMathCallStack(trm);
      if (availibility[0]) {
        MathCallStack[availibility[1]].exp += 1;
      }
      else {
        MathCallStack.push(trm);
      }
      equation += buildEquation();
      expression();
    }

    function add_term_x2() {
      trm = { type: 1, char: "x", exp: 2 };
      availibility = availableInMathCallStack(trm);
      if (availibility[0]) {
        MathCallStack[availibility[1]].exp += 2;
      }
      else {
        MathCallStack.push(trm);
      }
      equation += buildEquation();
      expression();
    }

    function expression() {
      console.log(equation);
      document.getElementById("f1").innerHTML = MathJax.tex2svg(equation, { em: 12, ex: 6, display: false }).outerHTML;
    }
  </script>
</head>

<body>
  <p>
    Giving the description of 
    \[
      \left | S_{0} \right \rangle = \prod _{n=1} ^{N} \prod _{\sigma=1} c^{\dagger}_{H,n,\sigma} \left | 0 \right \rangle
    \]

  </p>
  <input type="text" id="read" value="2x^2 + 2y^2" />
  <button onclick="expression()">function </button>
  <button onclick="add_term()" id="fx">\(x\)</button>
  <button onclick="add_term_x2()" id="fx">\(x^2\)</button>
  <p id="f1">
  </p>
</body>

</html>